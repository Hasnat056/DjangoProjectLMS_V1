<!-- admin/bulk_operations_main.html - Main bulk operations page for dashboard -->
<div class="max-w-6xl mx-auto space-y-6">
    <!-- Quick Stats -->
    <div class="grid grid-cols-1 md:grid-cols-4 gap-6 mb-8">
        <div class="card-gradient p-6 rounded-xl border-l-4 border-blue-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600">Total Students</p>
                    <p id="total-students-count" class="text-2xl font-bold text-blue-600">{{ total_students }}</p>
                </div>
                <div class="bg-blue-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                    </svg>
                </div>
            </div>
        </div>

        <div class="card-gradient p-6 rounded-xl border-l-4 border-emerald-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600">Active Enrollments</p>
                    <p id="total-enrollments-count" class="text-2xl font-bold text-emerald-600">{{ active_enrollments }}</p>
                </div>
                <div class="bg-emerald-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-emerald-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                </div>
            </div>
        </div>

        <div class="card-gradient p-6 rounded-xl border-l-4 border-purple-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600">Course Allocations</p>
                    <p id="total-allocations-count" class="text-2xl font-bold text-purple-600">{{ active_allocations }}</p>
                </div>
                <div class="bg-purple-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-purple-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                    </svg>
                </div>
            </div>
        </div>

        <div class="card-gradient p-6 rounded-xl border-l-4 border-orange-500">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-sm font-medium text-gray-600">Total Faculty</p>
                    <p id="total-faculty-count" class="text-2xl font-bold text-orange-600">{{ total_faculty }}</p>
                </div>
                <div class="bg-orange-100 p-3 rounded-full">
                    <svg class="w-6 h-6 text-orange-600" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3z"></path>
                    </svg>
                </div>
            </div>
        </div>
    </div>

    <!-- Bulk Operations Grid -->
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        <!-- Student Operations -->
        <div class="card-gradient rounded-xl p-6 hover:shadow-lg transition-all duration-200">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">Student Operations</h3>
                        <p class="text-sm text-gray-500">Manage multiple students at once</p>
                    </div>
                </div>
                <div class="bg-blue-50 px-3 py-1 rounded-full">
                    <span class="text-xs font-medium text-blue-700">Available</span>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Activate/Deactivate students</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Graduate multiple students</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Filter by program and status</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Batch status updates</span>
                </div>
            </div>

            <a href="/admin/bulk-operations/students/" class="w-full bg-gradient-to-r from-blue-500 to-blue-600 text-white py-3 px-4 rounded-lg hover:from-blue-600 hover:to-blue-700 transition-all duration-200 flex items-center justify-center space-x-2 text-decoration-none">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"></path>
                </svg>
                <span>Manage Students</span>
            </a>
        </div>

        <!-- Enrollment Operations -->
        <div class="card-gradient rounded-xl p-6 hover:shadow-lg transition-all duration-200">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">Enrollment Operations</h3>
                        <p class="text-sm text-gray-500">Manage student course enrollments</p>
                    </div>
                </div>
                <div class="bg-emerald-50 px-3 py-1 rounded-full">
                    <span class="text-xs font-medium text-emerald-700">Available</span>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Bulk enroll students in courses</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Mass unenroll from courses</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Update enrollment status</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Filter by course and session</span>
                </div>
            </div>

            <a href="/admin/enrollments/create/" class="w-full bg-gradient-to-r from-emerald-500 to-emerald-600 text-white py-3 px-4 rounded-lg hover:from-emerald-600 hover:to-emerald-700 transition-all duration-200 flex items-center justify-center space-x-2 text-decoration-none">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                </svg>
                <span>Manage Enrollments</span>
            </a>
        </div>

        <!-- Allocation Operations -->
        <div class="card-gradient rounded-xl p-6 hover:shadow-lg transition-all duration-200">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-purple-500 to-purple-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">Allocation Operations</h3>
                        <p class="text-sm text-gray-500">Manage course-faculty allocations</p>
                    </div>
                </div>
                <div class="bg-purple-50 px-3 py-1 rounded-full">
                    <span class="text-xs font-medium text-purple-700">Available</span>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Update allocation status</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Change session assignments</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Mass archive old allocations</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Filter by faculty and course</span>
                </div>
            </div>

            <a href="/admin/bulk-operations/allocations/" class="w-full bg-gradient-to-r from-purple-500 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-purple-600 hover:to-purple-700 transition-all duration-200 flex items-center justify-center space-x-2 text-decoration-none">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M6 6V5a3 3 0 013-3h2a3 3 0 013 3v1h2a2 2 0 012 2v3.57A22.952 22.952 0 0110 13a22.95 22.95 0 01-8-1.43V8a2 2 0 012-2h2zm2-1a1 1 0 011-1h2a1 1 0 011 1v1H8V5zm1 5a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                </svg>
                <span>Manage Allocations</span>
            </a>
        </div>

        <!-- Data Import -->
        <div class="card-gradient rounded-xl p-6 hover:shadow-lg transition-all duration-200">
            <div class="flex items-center justify-between mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl flex items-center justify-center">
                        <svg class="w-6 h-6 text-white" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                        </svg>
                    </div>
                    <div>
                        <h3 class="text-xl font-semibold text-gray-900">Data Import</h3>
                        <p class="text-sm text-gray-500">Import data via CSV files</p>
                    </div>
                </div>
                <div class="bg-orange-50 px-3 py-1 rounded-full">
                    <span class="text-xs font-medium text-orange-700">Available</span>
                </div>
            </div>

            <div class="space-y-4 mb-6">
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">CSV import for students</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">CSV import for faculty</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Data validation tools</span>
                </div>
                <div class="flex items-center space-x-3">
                    <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                    <span class="text-sm text-gray-700">Import status tracking</span>
                </div>
            </div>

            <a href="/admin/bulk-operations/import/" class="w-full bg-gradient-to-r from-orange-500 to-orange-600 text-white py-3 px-4 rounded-lg hover:from-orange-600 hover:to-orange-700 transition-all duration-200 flex items-center justify-center space-x-2 text-decoration-none">
                <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z" clip-rule="evenodd"></path>
                </svg>
                <span>Import Data</span>
            </a>
        </div>
    </div>

    <!-- Quick Tips -->
    <div class="card-gradient rounded-xl p-6 mt-8">
        <div class="flex items-start space-x-4">
            <div class="flex-shrink-0">
                <div class="w-10 h-10 bg-yellow-100 rounded-full flex items-center justify-center">
                    <svg class="w-5 h-5 text-yellow-600" fill="currentColor" viewBox="0 0 20 20">
                        <path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path>
                    </svg>
                </div>
            </div>
            <div class="flex-1">
                <h3 class="text-lg font-semibold text-gray-900 mb-2">Important Notes</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-gray-600">
                    <div>
                        <h4 class="font-medium text-gray-800">Before Bulk Operations:</h4>
                        <ul class="mt-2 space-y-1">
                            <li>• Always filter data before selecting</li>
                            <li>• Review selection carefully</li>
                            <li>• Consider creating backups for large operations</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-800">Best Practices:</h4>
                        <ul class="mt-2 space-y-1">
                            <li>• Test with small batches first</li>
                            <li>• Operations cannot be undone</li>
                            <li>• Check results after completion</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Load stats when page loads
document.addEventListener('DOMContentLoaded', function() {
    // Only load stats if we're on the bulk operations page
    if (document.getElementById('total-students-count')) {
        loadBulkOperationsStats();
    }
});

// Function to load bulk operations stats
async function loadBulkOperationsStats() {
    try {
        const response = await fetch('/admin/api/bulk-operations/stats/');
        if (response.ok) {
            const data = await response.json();

            // Update stat cards
            if (data.total_students !== undefined) {
                document.getElementById('total-students-count').textContent = data.total_students;
            }
            if (data.active_enrollments !== undefined) {
                document.getElementById('total-enrollments-count').textContent = data.active_enrollments;
            }
            if (data.active_allocations !== undefined) {
                document.getElementById('total-allocations-count').textContent = data.active_allocations;
            }
            if (data.total_faculty !== undefined) {
                document.getElementById('total-faculty-count').textContent = data.total_faculty;
            }
        }
    } catch (error) {
        console.error('Error loading bulk operations stats:', error);
    }
}
</script>